{"ast":null,"code":"import _objectSpread from\"/Users/aleksandrbaran/Desktop/Repo/React/my_project/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/aleksandrbaran/Desktop/Repo/React/my_project/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/aleksandrbaran/Desktop/Repo/React/my_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/aleksandrbaran/Desktop/Repo/React/my_project/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import ReactDOM from'react-dom';import{toast,ToastContainer,Zoom}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Button from'@mui/material/Button';import s from'./Form.module.css';import React,{useState,useEffect}from'react';import List from'../List/List';import{useDispatch}from'react-redux';import*as actions from'../../redux/users/users-action';import{useSelector}from\"react-redux\";import*as selectors from'../../redux/users/user-selector';import{Link as NavLink}from'react-router-dom';import{Pagination,PaginationItem,Stack}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Form(props){var _props$location;var pages=useSelector(selectors.getState);// const [data, setData] = useState({});\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),repo=_useState2[0],setRepo=_useState2[1];var dispatch=useDispatch();var perPage=12;// parseInt(props.location.search?.split(\"=\")[1] || 1)\nvar _useState3=useState(parseInt(((_props$location=props.location)===null||_props$location===void 0?void 0:_props$location.split(\"=\")[1])||1)),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];// parseInt(props.location.search?.split(\"=\")[1] || 1)\nvar _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];var onChangeHandler=function onChangeHandler(e){setRepo(e.target.value);};useEffect(function(){if(!repo)return;getData();},[currentPage]);var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var profile,profileJson;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.github.com/search/repositories?q=\".concat(repo,\"&per_page=\").concat(perPage,\"&page=\").concat(currentPage));case 2:profile=_context.sent;_context.next=5;return profile.json();case 5:profileJson=_context.sent;setCount(profileJson.total_count);if(repo){_context.next=9;break;}return _context.abrupt(\"return\",toast.error('Please input repositories'));case 9:if(repo.trim()){_context.next=11;break;}return _context.abrupt(\"return\",toast.error('Please input repositories'));case 11:if(!(profileJson.items.length===0)){_context.next=13;break;}return _context.abrupt(\"return\",toast.warning('Please input repositories'));case 13:if(profileJson){dispatch(actions.fetchRepositoriesSuccess(profileJson));dispatch(actions.setCurrentPage(profileJson));}case 14:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var submitHandler=function submitHandler(e){e.preventDefault();getData();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{className:s.form,onSubmit:function onSubmit(e){return submitHandler(e);},children:[/*#__PURE__*/_jsxs(\"label\",{className:s.label,children:[\"Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"input GitHub user name\",name:\"name\",pattern:\"^[a-zA-Z\\u0430-\\u044F\\u0410-\\u042F]+(([' -][a-zA-Z\\u0430-\\u044F\\u0410-\\u042F ])?[a-zA-Z\\u0430-\\u044F\\u0410-\\u042F]*)*$\",title:\"\\u0418\\u043C\\u044F \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0441\\u043E\\u0441\\u0442\\u043E\\u044F\\u0442\\u044C \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0438\\u0437 \\u0431\\u0443\\u043A\\u0432, \\u0430\\u043F\\u043E\\u0441\\u0442\\u0440\\u043E\\u0444\\u0430, \\u0442\\u0438\\u0440\\u0435 \\u0438 \\u043F\\u0440\\u043E\\u0431\\u0435\\u043B\\u043E\\u0432. \\u041D\\u0430\\u043F\\u0440\\u0438\\u043C\\u0435\\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \\u0438 \\u0442. \\u043F.\",required:true,onChange:onChangeHandler,value:repo,className:s.input})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsx(List,{}),/*#__PURE__*/_jsx(Stack,{spacing:2,children:!!count&&pages&&/*#__PURE__*/_jsx(Pagination,{count:Math.ceil(count/perPage),page:currentPage,onChange:function onChange(_,num){return setCurrentPage(num);},showFirstButton:true,showLastButton:true,sx:{marginY:3,marginX:\"auto\"},renderItem:function renderItem(item){return/*#__PURE__*/_jsx(PaginationItem,_objectSpread({component:NavLink,to:\"/search/?page=\".concat(item.page)},item));}})}),/*#__PURE__*/_jsx(ToastContainer,{transition:Zoom,autoClose:3000})]});};","map":{"version":3,"sources":["/Users/aleksandrbaran/Desktop/Repo/React/my_project/src/components/Form/Form.js"],"names":["ReactDOM","toast","ToastContainer","Zoom","Button","s","React","useState","useEffect","List","useDispatch","actions","useSelector","selectors","Link","NavLink","Pagination","PaginationItem","Stack","Form","props","pages","getState","repo","setRepo","dispatch","perPage","parseInt","location","split","currentPage","setCurrentPage","count","setCount","onChangeHandler","e","target","value","getData","fetch","profile","json","profileJson","total_count","error","trim","items","length","warning","fetchRepositoriesSuccess","submitHandler","preventDefault","form","label","input","Math","ceil","_","num","marginY","marginX","item","page"],"mappings":"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","sourcesContent":["\n\nimport ReactDOM from 'react-dom';\nimport { toast, ToastContainer, Zoom } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Button from '@mui/material/Button';\nimport s from './Form.module.css'\nimport React, { useState,useEffect } from 'react';\nimport List from '../List/List'\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../redux/users/users-action'\nimport { useSelector} from \"react-redux\";\nimport * as selectors from '../../redux/users/user-selector'\nimport{Link as NavLink} from 'react-router-dom'\nimport {\n  Pagination,\n  PaginationItem,\n  Stack,\n} from \"@mui/material\";\n\n\nexport default function Form(props) {\n  \n  const pages = useSelector(selectors.getState);\n  // const [data, setData] = useState({});\n  const [repo, setRepo] = useState(\"\");\n  const dispatch = useDispatch();\n  const perPage = 12;\n  // parseInt(props.location.search?.split(\"=\")[1] || 1)\n  const [currentPage, setCurrentPage] = useState(parseInt(props.location?.split(\"=\")[1] || 1))\n    // parseInt(props.location.search?.split(\"=\")[1] || 1)\n  const [count, setCount] = useState(0);\n  const onChangeHandler = e => {\n    setRepo(e.target.value);\n  };\n  useEffect(() => {\n  if (!repo)\n            return\n    getData()  \n    \n  }, [currentPage])\n\n  const getData = async () => {\n    const profile = await fetch(`https://api.github.com/search/repositories?q=${repo}&per_page=${perPage}&page=${currentPage}`);\n    const profileJson = await profile.json();\n    setCount(profileJson.total_count)\n    if (!repo) return toast.error('Please input repositories');\n    if (!repo.trim()) return toast.error('Please input repositories');\n    if (profileJson.items.length === 0) return toast.warning('Please input repositories');\n    if (profileJson) {\n      dispatch(actions.fetchRepositoriesSuccess(profileJson))\n      dispatch(actions.setCurrentPage(profileJson))\n    }\n  }\n  const submitHandler = (e) => {\n    e.preventDefault();\n    getData();\n  }\n  return (\n    <>\n        <form className={s.form} onSubmit={(e)=>submitHandler(e)}>\n            <label className={s.label}>\n                Name\n                <input\n                    type=\"text\"\n                    placeholder=\"input GitHub user name\"\n                    name=\"name\"\n                    pattern=\"^[a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\n                    title=\"Имя может состоять только из букв, апострофа, тире и пробелов. Например Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan и т. п.\"\n                    required\n              onChange={onChangeHandler}\n                    value={repo}\n                    className={s.input} />\n                </label>\n                <Button  type=\"submit\">Search</Button>\n        </form>\n    <List />\n      <Stack spacing={2}>\n        {!!count && pages && (\n          <Pagination\n          count={Math.ceil(count/perPage)}\n          page={currentPage}\n          onChange={(_, num) => setCurrentPage(num)}\n          showFirstButton\n          showLastButton\n          sx={{ marginY: 3, marginX: \"auto\" }}\n          renderItem={(item) => (\n            <PaginationItem\n            component={NavLink}\n            to={`/search/?page=${item.page}`}\n            {...item}\n            />\n            )}\n            />\n            )}\n          </Stack>\n            <ToastContainer transition={Zoom} autoClose={3000} />\n\n            </>\n) \n};\n"]},"metadata":{},"sourceType":"module"}